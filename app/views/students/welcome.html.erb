<div class="container">
	<% if student_signed_in? %>
	<h1>welcome <%=current_student.first_name%></h1>

	<%end%>


	<div class="row">
		<div class="col-sm-12">
			<h1>Tests</h1>
			<div class="table-responsive"><%c=0%>
				<table border="2"  class="table table-striped table-bordered table-hover" >
					<thead>

						<tr><th>No</th>
							<th>Subject</th>
							<th>Test Name</th>
							<th>Test Date and Time</th>
							<th>Total time</th>
							<th >No.of Questions</th>
							<th>Teacher Name</th>
							<th>Status</th>
						</tr> 
					</thead>
					<tbody>
						<% @tests.each do |test| %>
						<tr>
						<td ><%= c=c+1 %></td>
							<td><%=test.standard_subject.subject.sub_name%></td>
							<td><%= test.test_name %></td>
							<td><%= test.test_datetime.strftime("%d-%m-%Y %l:%M %p") %> 
							<span class="badge"><%=days_remain(test)%></span></td>
							<td><span class="badge"><%= test.total_time %>:00 </span>  Minutes</td>
							<td>Questions <span class="badge"><%= test.no_of_questions %></span></td>
							<td><%= test.teacher.first_name %></td>
							<td><%= test_status(test) %></td>

						</tr>
						<% end %>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>
</div>
<div class="row">
  <div class="col-sm-6 col-md-4">
    <div class="thumbnail">
      <div class="caption">
        <h3>Total Test is <%= @tests.count%></h3>
        <p>Total Test is <%= @tests.count%>attempt or not</p>
   		<% 
    	attmp=current_student.results.count
    	total= @tests.count == attmp ? 0 : @tests.count-attmp
	    data ={"Test Attended"=>attmp,"Not Attended Test"=>total}
    	%>
		<%= column_chart data %>
       </div>
    </div>
  </div>
</div>
 
 



			 	
			 	<div class="row">
		<div class="col-md-6">
			<h1>All result</h1>
			<div class="table-responsive">

<table border="2"  class="table table-striped table-bordered table-hover" >
					<thead>

						<tr><th>test name</th>
					
							<th>Attempted Question</th>
							<th>correct question</th>
							<th>incorrect question</th>
							<th >No of question </th>
							<th>percentage</th>
							<th>Status</th>
						</tr> 
					</thead>
					<tbody>
						<% current_student.results.each do |t| %>
						<tr>
						<td><%= t.test.test_name %></td>
						
							<td><%= t.attempted_question%></td>
							<td><%= t.correct_question %></td>
							<td><%= t.incorrect_question %></td>
							<td><%= t.test.no_of_questions %></td>
							<td><%= t.percentage %></td>
							 <% if t.percentage <=35 %>
  							<td> <li class="list-group-item list-group-item-danger">fail</li></td>
  							<%end%>
  							 <% if t.percentage >=35 %>
  							<td><li class="list-group-item list-group-item-success">pass</li></td>
  							<%end%>  
						</tr>
						<% end %>
					</table>
					</div>
			</div>
		
			 <div class="col-md-6">
			
			<%
              att=current_student.results
              @data1 = att.pluck(:percentage,:test_id)
    
               %>
       			<%= line_chart @data1 %>
       		</div>
       			 </div>

       			

        <div class="row">
		<div class="col-md-6">
			<h1>Student name and percentage</h1>
			<div class="table-responsive">

<table border="2"  class="table table-striped table-bordered table-hover" >
					<thead>

						<tr><th>First Name</th>
					
							<th>Percentage</th>
					
						</tr> 
					</thead>
					<tbody>
						<% Result.all.each do |r| %>
						<tr>
						<td><%= r.student.first_name %></td>
						
							<td><%= r.percentage%></td>
							
						<% end %>
					</table>
					</div>
			</div>
		
			 <div class="col-md-6">
			
		 <h1> all student result average </h1>
<%data1=Result.group(:student_id).average(:percentage)%>
        <%=column_chart data1%>
       		</div>
       			 </div>