<div class="container">
<div class="col-sm-12">

  <div class="profile-content">
    <div class="row">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title"> <i class="glyphicon glyphicon-equalizer"></i> Performance Chart</h3>
        </div>
        <div class="panel-body">
           <div class="col-md-4">
            <div class="thumbnail">
              <% g_data=current_teacher.tests.joins(:results).distinct.group(:test_name).count(:student_id) %>
                <%=column_chart g_data ,label: "Attended Test",width: "250px", height: "200px" %>
                  <div class="caption">
                    <button type="button" class="btn btn-success btn-sm btn-block">
                      how many student attend the test
                    </button>
                   </div>
            </div>
          
         
          </div>

          <div class="col-md-8">
            <h1>Test Data</h1>
            <div class="table-responsive">
              <table border="2" class="table table-striped table-bordered table-hover">
                <thead>
                  <tr>
                    <th>Test_Name</th>
                    <th>No of Student Attempted</th>
                  </tr>
                </thead>
                <tbody>
                  <% current_teacher.tests.joins(:results).distinct.each do |test| %>
                    <tr>
                      <td>
                        <%=test.test_name %>
                      </td>
                      <td>
                        <%=Test.where(:id=>test.id).joins(:results).count%></td>
                      <% end %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
              <div class="thumbnail">
                <%data1=Result.group(:student_id).average(:percentage)%>

                  <%=column_chart data1 ,width: "250px", height: "200px" %>
                    <div class="caption">
                      <button type="button" class="btn btn-success btn-sm btn-block">
                        all student result average
                      </button>

                    </div>
              </div>
            </div>

        <div class="col-md-8">
            <h1>Student name and percentage</h1>
            <div class="table-responsive">

              <table border="2" class="table table-striped table-bordered table-hover">
                <thead>

                  <tr>
                    <th>First Name</th>

                    <th>Percentage</th>

                  </tr>
                </thead>
                <tbody>
                  <% Result.joins(:student).select(:first_name).group(:first_name,:student_id).average(:percentage).each do |k,v| %>
                    <tr>
                      <td>
                        <%=k [0] %>
                      </td>

                      <td>
                        <%=v %>
                      </td>

                      <% end %>
              </table>
            </div>
          </div>
        </div>
      

          <div class="row">



 <div class="col-md-4">
            <div class="thumbnail">
              <% stu_1=Student.find(1).first_name 
              stu_1_res=Student.find(1).results 
              percentage=stu_1_res.average(:percentage) 
              stu_2=Student.find(2).first_name
              stu_2_res=Student.find(2).results 
              percentage1=stu_2_res.average(:percentage) %>
                <% graph_data={ stu_1=> percentage, stu_2=> percentage1, } %>
                  <%=column_chart graph_data ,width: "250px", height: "200px"%>
                    <div class="caption">
                      <button type="button" class="btn btn-success btn-sm btn-block">
                        Two Student Performance Compare
                      </button>
                    </div>
            </div>
          </div>
          </div>
        </div>